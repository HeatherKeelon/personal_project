/*! personalproject 2015-12-07 */
var myApp=angular.module("myApp",["ngRoute"]);myApp.controller("GameController",["$scope","$http","TeamAndGame","GoldFactory","ExperienceFactory",function(a,b,c,d,e){a.teamAndGame=c,a.goldFactory=d,a.expFactory=e,a.user={},a.team_id,a.username={},a.currentGame=[],a.numberGames=a.currentGame.length,a.character="Syndrael",a.teamChoice=function(c){a.teamAndGame.setGameNumber(c),a.cookie=$teamAndGame.getGame(),a.goldFactory.goldData(a.user,a.cookie,a.character),a.expFactory.expData(a.user,a.cookie,a.character),b.post("/games/retrieveteam").then(function(b){a.user=b.data.team_name,a.username=b.data.username,console.log("User",a.user),console.log("Game",a.cookie),console.log("This is username",a.username)}),console.log("This is cookie",a.cookie)},a.getTeam=function(){b.post("/games/retrieveteam").then(function(b){a.user=b.data.team_name,a.username=b.data.username,console.log("User",a.user),console.log("Game",a.cookie),console.log("This is username",a.username)})},console.log("cookie",a.cookie),console.log("user",a.user),console.log("character",a.character),a.refreshGames=function(){b.get("/games/refreshGames").then(function(b){var c=parseInt(b.data.game_number);if(0==c)console.log("No Games for This Team Yet");else{for(var d=1;c>=d;d++)a.currentGame.push(d);a.numberGames=a.currentGame.length}})},a.addGameToCurrent=function(){b.get("/games/refreshGames").then(function(b){var c=parseInt(b.data.game_number);a.currentGame.push(c),a.numberGames=a.currentGame.length})},a.newGame=function(){a.numberGames=a.currentGame.length+1,b.post("/games/newGame",{params:{numberGames:a.numberGames,team_name:a.user}}).then(function(){a.addGameToCurrent(),a.makeTables()})},a.makeTables=function(){b.post("/games/makeTables",{params:{team_name:a.user,game_number:a.numberGames}}).then(function(){console.log("Tables created")})},a.getTeam(),a.refreshGames()}]),myApp.controller("ActsController",["$scope","$http","TeamAndGame","GoldFactory","ExperienceFactory","$location","$route",function(a,b,c,d,e,f,g){a.user,a.cookie,a.teamAndGame=c,a.goldFactory=d,a.expFactory=e,a.character="Syndrael",a.syndraelGold,a.syndraelExp,a.syndraelExp=a.expFactory.giveExp(),console.log("This is syndraelGold",a.syndraelGold),a.getTeam=function(){a.cookie=a.teamAndGame.getGame(),void 0==a.teamAndGame.gameData()?(console.log("You are in the if statement"),b.get("/acts/getTeam").then(function(b){console.log("This is response from database",b.data),a.teamAndGame.retrieveData(b.data),a.user=a.teamAndGame.gameData(),a.goldFactory.goldData(a.user,a.cookie,a.character),a.syndraelGold=a.goldFactory.giveGold(),a.expFactory.expData(a.user,a.cookie,a.character)})):(a.user=a.teamAndGame.gameData(),a.goldFactory.goldData(a.user,a.cookie,a.character),a.syndraelGold=a.goldFactory.giveGold())},a.firstBloodHeroes=function(){return a.expFactory.postExp(a.user,a.cookie,a.character,"1"),a.syndraelExp=a.expFactory.giveExp(),console.log("This is experience coming in from the factory",a.expFactory.giveExp()),console.log("This is her experience",a.syndraelExp),g.reload(),a.syndraelExp},a.fatgoblinHeroes=function(){return console.log("This is user",a.user),console.log("This is cookie",a.cookie),console.log("This is character",a.character),a.expFactory.postExp(a.user,a.cookie,a.character,"1"),a.syndraelExp=a.expFactory.giveExp(),console.log("This is experience after fatgoblin",a.syndraelExp),a.syndraelGold=Number(a.syndraelGold)+25,console.log("This is syndraelGold",a.syndraelGold),a.goldFactory.postGold(a.user,a.cookie,a.character,a.syndraelGold),a.syndraelExp},a.monstersHoardHeroes=function(){a.expFactory.postExp(a.user,a.cookie,a.character,"1"),a.syndraelExp=a.expFactory.giveExp(),console.log("This is experience after fatgoblin",a.syndraelExp),alert("The True Shot has been added to your available equipment. Got to bank equipment and select 'find.'"),b.post("/acts/postNewEquip",{params:{team:a.user,game:a.cookie,equip:"True Shot",type:"2",description:"+3 Range  Bolt: Move the target 1 space.  Bolt: +2 damage.",cost:"0",sale_cost:"0",dice:"blue, red, yellow",exhaust:!1,equipped:!1,category:"Bow"}}).then(function(){console.log("equipment posted")})},a.getTeam(),console.log("games",a.cookie),console.log("user at end of controller",a.user)}]),myApp.controller("MainCharacterController",["$scope","TeamAndGame","$http","EquipFactory","$timeout","$location",function(a,b,c,d,e,f){a.user,a.character="Syndrael",a.game,a.teamAndGame=b,a.equipFactory=d,a.syndraelstamina,a.syndraelstaminamax=12,a.syndraelfatigue=4,a.syndraelfatiguemax=4,a.syndraelmight=4,a.syndraelknowledge=3,a.syndraelwillpower=2,a.syndraelawareness=2,a.checkboxModel={poison:!1,immobalize:!1,stun:!1,disease:!1},a.syndraelunequip=[],a.bankequip=[],a.equippeddata=[],a.syndraelcurrent,a.syndraelrh="none",a.syndraellh="none",a.syndraelbh="none",a.syndraelarmor="none",a.syndraelaccessory1="none",a.syndraelaccessory2="none",a.requestedUnequip={},a.equipment={name:"none",description:"none"},a.currentequipment={},a.game=a.teamAndGame.getGame(),a.getUser=function(){void 0==a.teamAndGame.gameData()?(console.log("You are in the if statement"),c.get("/acts/getTeam").then(function(b){a.teamAndGame.retrieveData(b.data),a.user=a.teamAndGame.gameData()})):a.user=a.teamAndGame.gameData()},a.getUser(),a.getUnequip=function(){c.get("/main/getUnequip",{params:{team:a.user,game:a.game,character:a.character}}).then(function(b){a.syndraelunequip=b.data,console.log("This is unequip in call",a.syndraelunequip)})},a.getBankequip=function(){c.get("/main/getBankequip",{params:{team:a.user,game:a.game}}).then(function(b){a.bankequip=b.data,console.log("This is bank equip in call",a.bankequip)})},a.getEquippedData=function(){c.get("/main/getEquippedData",{params:{team:a.user,game:a.game,character:a.character}}).then(function(b){a.equippeddata=b.data,console.log("This is equippeddata",a.equippeddata)})},a.syndraelHeroicFeat=function(){alert("Use during your turn to choose a hero within 3 spaces of you. You and that hero may each immediately perform a move action. This is in addition to the 2 actions each hero receives on his turn.")},a.syndraelHeroicAbility=function(){alert("If you have not moved during this turn, you recover 2 stamina at the end of your turn.")},a.syndraelStartingStamina=function(){c.get("/main/startStats",{params:{team:a.user,game:a.game,character:a.character,stat:"stamina"}}).then(function(b){a.syndraelstamina=b.data.stamina})},a.syndraelStartingFatigue=function(){c.get("/main/startStats",{params:{team:a.user,game:a.game,character:a.character,stat:"fatigue"}}).then(function(b){a.syndraelfatigue=b.data.fatigue})},a.syndraelEquip=function(){c.get("/main/syndraelEquip",{params:{team:a.user,game:a.game,character:a.character}}).then(function(b){console.log("This is response.data equip",b.data);for(var c=0;c<b.data.length;c++)null==b.data[c].acc1?a.syndraelaccessory1="none":a.syndraelaccessory1=b.data[c].acc1,null==b.data[c].acc2?a.syndraelaccessory2="none":a.syndraelaccessory2=b.data[c].acc2,null==b.data[c].armor?a.syndraelarmor="none":a.syndraelarmor=b.data[c].armor,null==b.data[c].left_hand?a.syndraellh="none":a.syndraellh=b.data[c].left_hand,null==b.data[c].right_hand?a.syndraelrh="none":a.syndraelrh=b.data[c].right_hand,null==b.data[c].two_hand?a.syndraelbh="none":a.syndraelbh=b.data[c].two_hand})},a.staminaPlus=function(){a.syndraelstamina<a.syndraelstaminamax&&(a.syndraelstamina++,c.post("/main/staminafatigue",{params:{team:a.user,game:a.game,character:a.character,stat:a.syndraelstamina,type:"stamina"}}).then(function(){console.log("stamina post")}))},a.staminaMinus=function(){a.syndraelstamina>0&&(a.syndraelstamina--,c.post("/main/staminafatigue",{params:{team:a.user,game:a.game,character:a.character,stat:a.syndraelstamina,type:"stamina"}}).then(function(){console.log("stamina post")}))},a.fatiguePlus=function(){a.syndraelfatigue<a.syndraelfatiguemax&&(a.syndraelfatigue++,c.post("/main/staminafatigue",{params:{team:a.user,game:a.game,character:a.character,stat:a.syndraelfatigue,type:"fatigue"}}).then(function(){console.log("fatigue post")}))},a.fatigueMinus=function(){a.syndraelfatigue>0&&(a.syndraelfatigue--,c.post("/main/staminafatigue",{params:{team:a.user,game:a.game,character:a.character,stat:a.syndraelfatigue,type:"fatigue"}}).then(function(){console.log("fatigue post")}))},a.resetStats=function(){a.syndraelstamina=a.syndraelstaminamax,a.syndraelfatigue=a.syndraelfatiguemax,c.post("/main/resetStats",{params:{team:a.user,game:a.game,character:a.character,stamina:a.syndraelstaminamax,fatigue:a.syndraelfatiguemax}}).then(function(){console.log("stats reset")})},a.selectEquip=function(b){console.log("This is equipname",b.name);for(var c=0;c<a.syndraelunequip.length;c++)console.log("Scope.unequip[i]",a.syndraelunequip),console.log("This is scope.name",a.syndraelunequip[c].name),console.log(a.syndraelunequip[c].description),a.syndraelunequip[c].name==b.name&&(console.log("you are in if statement"),a.requestedUnequip.name=a.syndraelunequip[c].name,a.requestedUnequip.description=a.syndraelunequip[c].description,a.requestedUnequip.gold=a.syndraelunequip[c].cost,a.requestedUnequip.sale_cost=a.syndraelunequip[c].sale_cost,a.requestedUnequip.id=a.syndraelunequip[c].equip_id,a.requestedUnequip.category=a.syndraelunequip[c].category,a.requestedUnequip.type=a.syndraelunequip[c].type,a.requestedUnequip.dice=a.syndraelunequip[c].dice,a.requestedUnequip.exhaust=a.syndraelunequip[c].exhaust);a.equipFactory.retrieveData(a.requestedUnequip),console.log("Selected Name",a.equip),console.log("Selected Description",a.description),console.log("Selected Type",a.hand),f.url("/equip")},a.selectBankEquip=function(b){console.log("This is equipname",b.name);for(var c=0;c<a.bankequip.length;c++)console.log("Scope.unequip[i]",a.bankequip),console.log("This is scope.name",a.bankequip[c].name),console.log(a.bankequip[c].description),a.bankequip[c].name==b.name&&(console.log("you are in if statement"),a.equipment.name=a.bankequip[c].name,a.equipment.description=a.bankequip[c].description,a.equipment.gold=a.bankequip[c].cost,a.equipment.sale_cost=a.bankequip[c].sale_cost,a.equipment.id=a.bankequip[c].equip_id,a.equipment.category=a.bankequip[c].category,a.equipment.type=a.bankequip[c].type,a.equipment.dice=a.bankequip[c].dice,a.equipment.exhaust=a.bankequip[c].exhaust);a.equipFactory.retrieveBank(a.equipment),console.log("Selected Name",a.equipment.name),console.log("Selected Description",a.equipment.description),console.log("Selected Type",a.equipment.hand),f.url("/bankequip")},a.selectedCurrentEquip=function(b){console.log("This is equipname",b),console.log("This is equippeddata",a.equippeddata);for(var c=0;c<a.equippeddata.length;c++)a.equippeddata[c].name==b&&(console.log("you are in if statement"),a.currentequipment.name=a.equippeddata[c].name,a.currentequipment.description=a.equippeddata[c].description,a.currentequipment.gold=a.equippeddata[c].cost,a.currentequipment.sale_cost=a.equippeddata[c].sale_cost,a.currentequipment.id=a.equippeddata[c].equip_id,a.currentequipment.category=a.equippeddata[c].category,a.currentequipment.type=a.equippeddata[c].type,a.currentequipment.dice=a.equippeddata[c].dice,a.currentequipment.exhaust=a.equippeddata[c].exhaust);console.log("This is scope.currentequipment",a.currentequipment),a.equipFactory.retrieveCurrent(a.currentequipment),f.url("/carryequip")},a.syndraelStartingStamina(),a.syndraelStartingFatigue(),a.syndraelEquip(),a.getEquippedData(),a.equipFactory.allEquip(a.user,a.game,a.character),a.getUnequip(),console.log("getUnequip called"),a.getBankequip(),console.log("getBankequip called")}]),myApp.controller("EquipmentController",["$scope","$http","TeamAndGame","EquipFactory","GoldFactory","$location",function(a,b,c,d,e,f){a.teamAndGame=c,a.equipFactory=d,a.goldFactory=e,a.selectedEquip={},a.character="Syndrael",a.game,a.user,a.description,a.hand,a.name,a.gold,a.sell_gold,a.character_gold,a.equipid,a.category,a.type,a.dice,a.game=a.teamAndGame.getGame(),a.getUser=function(){void 0==a.teamAndGame.gameData()?b.get("/acts/getTeam").then(function(b){a.teamAndGame.retrieveData(b.data),a.user=a.teamAndGame.gameData()}):a.user=a.teamAndGame.gameData()},a.getUser(),a.loadEquip=function(){a.selectedEquip=a.equipFactory.gameData(),a.description=a.selectedEquip.description,a.name=a.selectedEquip.name,a.hand=a.selectedEquip.hand,a.gold=a.selectedEquip.gold,a.sell_gold=a.selectedEquip.sale_cost,a.equipid=a.selectedEquip.id,a.category=a.selectedEquip.category,console.log("This is category",a.category),a.type=a.selectedEquip.type,a.dice=a.selectedEquip.dice,1==a.selectedEquip.exhaust?a.exhaust="Yes":a.exhaust="No"},a.sellEquip=function(c){var d=parseInt(c);a.character_gold=parseInt(a.goldFactory.goldData(a.user,a.game,a.character)),a.character_gold=a.character_gold+d,a.goldFactory.postGold(a.user,a.game,a.character,a.character_gold),b.post("/equip/removeEquip",{params:{team:a.user,game:a.game,character:a.character,equip:a.equipid}}).then(function(b){a.goldFactory.giveGold(),f.url("/main")})},a.equipItem=function(){console.log("You are in equipItem"),console.log("This is weapon total client",a.equipFactory.getTotalWeapon());var b=a.type;console.log("this is type",b);var c=a.equipFactory.getTotalWeapon();switch(console.log("this is weapon total",c),b){case b="1":console.log("Your type is 1"),b=parseInt(a.type),console.log("This is type",b),b+c>2?alert("You cannot carry another weapon. Unequip one of your current weapons."):"none"==a.equipFactory.getEquip().syndraellh?a.equipFactory.updateEquip(a.user,a.game,a.character,a.name,a.equipid,"left_hand"):"none"==a.equipFactory.getEquip().syndraelrh&&a.equipFactory.updateEquip(a.user,a.game,a.character,a.name,a.equipid,"right_hand");break;case b="2":b=parseInt(a.type),console.log("Your type is 2"),b+c>2?alert("You cannot carry another weapon. Unequip one of your current weapons."):"none"==a.equipFactory.getEquip().syndraelbh?a.equipFactory.updateEquip(a.user,a.game,a.character,a.name,a.equipid,"two_hand"):alert("You already have a weapon equipped.");break;case b="accessory":console.log("Your type is accessory"),"none"==a.equipFactory.getEquip().syndraelaccessory1?(console.log("This is accessory from equipfac",a.equipFactory.getEquip().syndraelaccessory1),a.equipFactory.updateEquip(a.user,a.game,a.character,a.name,a.equipid,"acc1")):"none"==a.equipFactory.getEquip().syndraelaccessor2?a.equipFactory.updateEquip(a.user,a.game,a.character,a.name,a.equipid,"acc2"):alert("You already have an accessory equipped. Check your current equipment.");break;case b="armor":"none"==a.equipFactory.getEquip().syndraelarmor?a.equipFactory.updateEquip(a.user,a.game,a.character,a.name,a.equipid,"armor"):alert("It looks like you already have armor equipped. Check your equipment.");break;default:console.log("Something went wrong in switch")}f.url("/main")},a.loadEquip(),a.goldFactory.goldData(a.user,a.game,a.character),a.equipFactory.allEquip(a.user,a.game,a.character),a.equipFactory.allWeapon(a.user,a.game,a.character)}]),myApp.controller("BankEquipmentController",["$scope","$http","TeamAndGame","EquipFactory","GoldFactory","$location",function(a,b,c,d,e,f){a.teamAndGame=c,a.equipFactory=d,a.goldFactory=e,a.selectedBankEquip={},a.character="Syndrael",a.game,a.user,a.equipdescription,a.equiphand,a.equipname,a.equipgold,a.equipsell_gold,a.equipcharacter_gold,a.equipequipid,a.equipcategory,a.equiptype,a.equipexhaust,a.equipdice,a.game=a.teamAndGame.getGame(),a.getUser=function(){void 0==a.teamAndGame.gameData()?b.get("/acts/getTeam").then(function(b){a.teamAndGame.retrieveData(b.data),a.user=a.teamAndGame.gameData()}):a.user=a.teamAndGame.gameData()},a.getUser(),a.loadEquip=function(){a.selectedBankEquip=a.equipFactory.bankData(),console.log("This is selected equip",a.selectedEquip),a.equipdescription=a.selectedBankEquip.description,console.log("Scope.description",a.equipdescription),a.equipname=a.selectedBankEquip.name,console.log("equipname",a.equipname),a.equiphand=a.selectedBankEquip.hand,a.equipgold=a.selectedBankEquip.gold,console.log("equipgold",a.equipgold),a.equipsell_gold=a.selectedBankEquip.sale_cost,a.equipid=a.selectedBankEquip.id,a.equipcategory=a.selectedBankEquip.category,console.log("equipcategory",a.equipcategory),a.equiptype=a.selectedBankEquip.type,a.equipdice=a.selectedBankEquip.dice,console.log("This is equipdice",a.equipdice),1==a.selectedBankEquip.exhaust?a.equipexhaust="Yes":a.equipexhaust="No",console.log("This is exhaust",a.equipexhaust)},a.findEquip=function(){b.post("/equip/findEquip",{params:{team:a.user,game:a.game,character:a.character,id:a.equipid}}).then(function(){console.log("Item added to character's collection."),f.url("/main")})},a.buyEquip=function(b){var b=parseInt(b);a.equipcharacter_gold=parseInt(a.goldFactory.goldData(a.user,a.game,a.character)),console.log("This is gold",b),console.log("This is character gold with parseInt(aka factory)",a.equipcharacter_gold),a.equipcharacter_gold=a.equipcharacter_gold-b,console.log("This is character_gold after sale",a.equipcharacter_gold),a.goldFactory.postGold(a.user,a.game,a.character,a.equipcharacter_gold),a.goldFactory.giveGold(),a.findEquip()},a.loadEquip(),a.goldFactory.goldData(a.user,a.game,a.character),a.equipFactory.allEquip(a.user,a.game,a.character),a.equipFactory.allWeapon(a.user,a.game,a.character)}]),myApp.controller("CarryEquipmentController",["$scope","$http","TeamAndGame","EquipFactory","GoldFactory","$location",function(a,b,c,d,e,f){a.teamAndGame=c,a.equipFactory=d,a.goldFactory=e,a.carryEquip={},a.character="Syndrael",a.game,a.user,a.carrydescription,a.carryhand,a.carryname,a.carrygold,a.carrysell_gold,a.carryid,a.carrycategory,a.carrytype,a.carryexhaust,a.carrydice,a.game=a.teamAndGame.getGame(),a.getUser=function(){void 0==a.teamAndGame.gameData()?b.get("/acts/getTeam").then(function(b){a.teamAndGame.retrieveData(b.data),a.user=a.teamAndGame.gameData()}):a.user=a.teamAndGame.gameData()},a.getUser(),a.loadCarryEquip=function(){a.carryEquip=a.equipFactory.currentData(),console.log("This is from factory equip",a.equipFactory.currentData()),console.log("THIS IS SELECTED EQUIP",a.carryEquip),a.carrydescription=a.carryEquip.description,a.carryname=a.carryEquip.name,a.carryhand=a.carryEquip.hand,a.carrygold=a.carryEquip.gold,a.carrysell_gold=a.carryEquip.sale_cost,a.carryid=a.carryEquip.id,a.carrycategory=a.carryEquip.category,a.carrytype=a.carryEquip.type,a.carrydice=a.carryEquip.dice,1==a.carryEquip.exhaust?a.carryexhaust="Yes":a.carryexhaust="No"},a.unequip=function(){console.log("Unequip function");var c=a.equipFactory.allEquip(a.user,a.game,a.character);switch(console.log("call",c),console.log("scope.carryname",a.carryname),a.carryname){case a.carryname=c.syndraelrh:a.carryhand="right_hand";break;case a.carryname=c.syndraellh:a.carryhand="left_hand";break;case a.carryname=c.syndraelbh:a.carryhand="two_hand";break;case a.carryname=c.syndraelaccessory1:a.carryhand="acc1";break;case a.carryname=c.syndraelaccessory2:a.carryhand="acc2";break;case a.carryname=c.syndraelarmor:a.carryhand="armor";break;default:console.log("Switch error")}console.log("This is $scope.carryhand",a.carryhand),b.post("/equip/unequip",{params:{team:a.user,game:a.game,character:a.character,id:a.carryid,name:a.carryname,hand:a.carryhand}}).then(function(){console.log("Equipment Removed")}),f.url("/main")},a.loadCarryEquip(),a.goldFactory.goldData(a.user,a.game,a.character),a.equipFactory.allEquip(a.user,a.game,a.character),console.log("allEquip",a.equipFactory.allEquip(a.user,a.game,a.character)),a.equipFactory.allWeapon(a.user,a.game,a.character),console.log("AllWeaon",a.equipFactory.allWeapon(a.user,a.game,a.character))}]),myApp.config(["$routeProvider",function(a){a.when("/login",{templateUrl:"/assets/views/login.html"}).when("/failure",{templateUrl:"/assets/views/failure.html"}).when("/usertaken",{templateUrl:"/assets/views/usertaken.html"}).when("/register",{templateUrl:"/assets/views/register.html"}).when("/games",{templateUrl:"/assets/views/games.html",controler:"GamesController"}).when("/acts",{templateUrl:"/assets/views/acts.html",controller:"ActsController"}).when("/main",{templateUrl:"/assets/views/main_syndrael.html",controller:"MainCharacterController"}).when("/equip",{templateUrl:"/assets/views/equip.html",controller:"EquipmentController"}).when("/bankequip",{templateUrl:"/assets/views/bankequip.html",controller:"BankEquipmentController"}).when("/carryequip",{templateUrl:"/assets/views/carryequip.html",controller:"CarryEquipmentController"}).otherwise({redirectTo:"login"})}]),myApp.directive("head",["$rootScope","$compile",function(a,b){return{restrict:"E",link:function(c,d){var e='<link rel="stylesheet" ng-repeat="(routeCtrl, cssUrl) in routeStyles" ng-href="{{cssUrl}}" />';d.append(b(e)(c)),c.routeStyles={},a.$on("$routeChangeStart",function(a,b,d){d&&d.$$route&&d.$$route.css&&(angular.isArray(d.$$route.css)||(d.$$route.css=[d.$$route.css]),angular.forEach(d.$$route.css,function(a){delete c.routeStyles[a]})),b&&b.$$route&&b.$$route.css&&(angular.isArray(b.$$route.css)||(b.$$route.css=[b.$$route.css]),angular.forEach(b.$$route.css,function(a){c.routeStyles[a]=a}))})}}}]),myApp.directive("gameProfile",function(){return{controller:"GameController",restrict:"E",scope:{info:"="},templateUrl:"assets/views/templates/gameProfile.html"}});