/*! personalproject 2015-11-30 */
var myApp=angular.module("myApp",[]);myApp.controller("GameController",["$scope","$http","$location","TeamAndGame",function(a,b,c,d){a.user={},a.team_id,a.username={},a.currentGame=[],a.numberGames=a.currentGame.length,a.teamAndGame=d,a.teamAndGame.retrieveData(),a.gameFactory=function(c){console.log("You are in gameFactory, here number",c),b.post("/games/assignGame",{params:{chosen_game:c,team_name:a.user}}).then(function(){console.log("Game Posted"),void 0==a.teamAndGame.gameData()?a.teamAndGame.retrieveData().then(function(){a.game=a.teamAndGame.gameData().then(function(){a.teamAndGame.gameNumber=c,window.location="/assets/views/acts.html"})}):(a.game=a.teamAndGame.gameData(),window.location="/assets/views/acts.html"),console.log("async",a.teamAndGame.gameData()),console.log("game",a.game)})},a.getTeam=function(){b.post("/games/retrieveteam").then(function(b){a.user=b.data.team_name,a.username=b.data.username})},a.refreshGames=function(){b.get("/games/refreshGames").then(function(b){var c=parseInt(b.data.game_number);if(0==c)console.log("No Games for This Team Yet");else{for(var d=1;c>=d;d++)a.currentGame.push(d);a.numberGames=a.currentGame.length}})},a.addGameToCurrent=function(){b.get("/games/refreshGames").then(function(b){var c=parseInt(b.data.game_number);a.currentGame.push(c),a.numberGames=a.currentGame.length})},a.newGame=function(){a.numberGames=a.currentGame.length+1,b.post("/games/newGame",{params:{numberGames:a.numberGames,team_name:a.user}}).then(function(){a.addGameToCurrent(),a.makeTables()})},a.makeTables=function(){b.post("/games/makeTables",{params:{team_name:a.user,game_number:a.numberGames}}).then(function(){console.log("Tables created")})},a.getTeam(),a.refreshGames()}]),myApp.controller("ActsController",["$scope","$http","$location","TeamAndGame",function(a,b,c,d){a.teamAndGame=d,a.user,console.log("This is from factory:",a.teamAndGame)}]),myApp.controller("MainCharacterController",["$scope","$http","$location","TeamAndGame",function(a,b,c,d){a.teamAndGame=d,a.user,a.character="Syndrael",a.syndraelstamina=12,a.syndraelstaminamax=12,a.syndraelfatigue=4,a.syndraelfatiguemax=4,a.syndraelunequip=[],void 0==a.teamAndGame.gameData()&&a.teamAndGame.retrieveData(),a.game=a.teamAndGame.gameData(),console.log("This is $scope.game",a.game),a.getTeam=function(){b.get("/acts/getTeam").then(function(b){a.user=b.data,console.log("This is response",b.data)})},a.getUnequip=function(){b.get("/acts/getUnequip",{params:{team:a.user,game:a.game,character:a.character}}).then(function(b){a.syndraelunequip=b.data,console.log("This is syndrael unequip",a.syndraelunequip),console.log("This is $scope.user",a.user),console.log("This is $scope.game",a.game)})},a.getTeam(),a.getUnequip()}]),myApp.directive("gameProfile",function(){return{controller:"GameController",restrict:"E",scope:{info:"="},templateUrl:"templates/gameProfile.html"}});