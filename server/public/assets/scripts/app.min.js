/*! personalproject 2015-11-28 */
var myApp=angular.module("myApp",[]);myApp.controller("GameController",["$scope","$http",function(a,b){a.user={},a.team_id,a.username={},a.currentGame=[],a.numberGames=a.currentGame.length,a.getTeam=function(){console.log("you are in getTeam"),b.post("/games/retrieveteam").then(function(b){a.user=b.data.team_name,a.username=b.data.username})},a.refreshGames=function(){b.get("/games/refreshGames").then(function(b){var c=parseInt(b.data.game_number);if(console.log("Game count from database at refresh: ",c),0==c)console.log("No Games for This Team Yet");else{for(var d=1;c>=d;d++)a.currentGame.push(d),console.log("This is currentGameCount going into numberGames ",c);a.numberGames=a.currentGame.length,console.log("currentGame at page fresh",a.currentGame)}})},a.addGameToCurrent=function(){b.get("/games/refreshGames").then(function(b){var c=parseInt(b.data.game_number);a.currentGame.push(c),a.numberGames=a.currentGame.length})},a.newGame=function(){a.numberGames=a.currentGame.length+1,console.log("This is new number games",a.numberGames),console.log("This us user ",a.user),b.post("/games/newGame",{params:{numberGames:a.numberGames,team_name:a.user}}).then(function(){console.log("New Game Complete"),a.addGameToCurrent(),a.makeTables()})},a.makeTables=function(){console.log("You are in makeTables"),b.post("/games/makeTables",{params:{team_name:a.user,game_number:a.numberGames}}).then(function(){console.log("Tables created")})},a.getTeam(),a.refreshGames(),console.log("This is numberGames at page load",a.numberGames)}]),myApp.directive("gameProfile",function(){return{restrict:"E",scope:{info:"="},templateUrl:"templates/gameProfile.html"}});