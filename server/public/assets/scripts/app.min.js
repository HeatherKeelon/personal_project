/*! personalproject 2015-12-02 */
var myApp=angular.module("myApp",["ngRoute"]);myApp.controller("GameController",["$scope","$http","$location",function(a,b,c){a.user={},a.team_id,a.username={},a.currentGame=[],a.numberGames=a.currentGame.length,a.setGame=function(a,b){document.cookie=a+"="+b+";",console.log(document.cookie)},a.getTeam=function(){b.post("/games/retrieveteam").then(function(b){a.user=b.data.team_name,a.username=b.data.username})},a.refreshGames=function(){b.get("/games/refreshGames").then(function(b){var c=parseInt(b.data.game_number);if(0==c)console.log("No Games for This Team Yet");else{for(var d=1;c>=d;d++)a.currentGame.push(d);a.numberGames=a.currentGame.length}})},a.addGameToCurrent=function(){b.get("/games/refreshGames").then(function(b){var c=parseInt(b.data.game_number);a.currentGame.push(c),a.numberGames=a.currentGame.length})},a.newGame=function(){a.numberGames=a.currentGame.length+1,b.post("/games/newGame",{params:{numberGames:a.numberGames,team_name:a.user}}).then(function(){a.addGameToCurrent(),a.makeTables()})},a.makeTables=function(){b.post("/games/makeTables",{params:{team_name:a.user,game_number:a.numberGames}}).then(function(){console.log("Tables created")})},a.getTeam(),a.refreshGames()}]),myApp.controller("ActsController",["$scope","$http","$location",function(a,b,c){a.user,a.cookie,a.getCookie=function(b){for(var c=b+"=",d=document.cookie.split(";"),e=0;e<d.length;e++){for(var f=d[e];" "==f.charAt(0);)f=f.substring(1);if(0==f.indexOf(c))return a.cookie=f.substring(c.length,f.length),console.log("Cookie inside getCookie",a.cookie),a.cookie}return""},a.getCookie("game"),console.log("Cookie outside getcookie",a.cookie),a.getTeam=function(){console.log("get team has been called"),b.get("/acts/getTeam").then(function(a){document.cookie="user="+a.data+";"})},a.getTeam(),a.getUser=function(b){for(var c=b+"=",d=document.cookie.split(";"),e=0;e<d.length;e++){for(var f=d[e];" "==f.charAt(0);)f=f.substring(1);if(0==f.indexOf(c))return a.user=f.substring(c.length,f.length),a.user}return""},a.getUser("user"),console.log("games",a.cookie),console.log("user",a.user)}]),myApp.controller("MainCharacterController",["$scope","$rootScope","$http",function(a,b,c){a.user,a.character="Syndrael",a.game,a.syndraelstamina,a.syndraelstaminamax=12,a.syndraelfatigue=4,a.syndraelfatiguemax=4,a.syndraelmight=4,a.syndraelknowledge=3,a.syndraelwillpower=2,a.syndraelawareness=2,a.checkboxModel={poison:!1,immobalize:!1,stun:!1,disease:!1},a.syndraelunequip=[],a.bankequip=[],a.syndraelrh="none",a.syndraellh="none",a.syndraelbh="none",b.syndraelaccessory1="none",b.syndraelaccessory2="none",b.equip=void 0,b.description=void 0,b.hand=void 0,a.gold=void 0,a.getCookie=function(b){for(var c=b+"=",d=document.cookie.split(";"),e=0;e<d.length;e++){for(var f=d[e];" "==f.charAt(0);)f=f.substring(1);if(0==f.indexOf(c))return a.game=f.substring(c.length,f.length),a.game}return""},a.getCookie("game"),a.getUser=function(b){for(var c=b+"=",d=document.cookie.split(";"),e=0;e<d.length;e++){for(var f=d[e];" "==f.charAt(0);)f=f.substring(1);if(0==f.indexOf(c))return a.user=f.substring(c.length,f.length),a.user}return""},a.getUser("user"),a.getUnequip=function(){c.get("/main/getUnequip",{params:{team:a.user,game:a.game,character:a.character}}).then(function(b){a.syndraelunequip=b.data,console.log("This is unequip",a.syndraelunequip)})},a.getBankequip=function(){c.get("/main/getBankequip",{params:{team:a.user,game:a.game}}).then(function(b){a.bankequip=b.data,console.log("This is bank equip",a.bankequip)})},a.syndraelHeroicFeat=function(){alert("Use during your turn to choose a hero within 3 spaces of you. You and that hero may each immediately perform a move action. This is in addition to the 2 actions each hero receives on his turn.")},a.syndraelHeroicAbility=function(){alert("If you have not moved during this turn, you recover 2 stamina at the end of your turn.")},a.syndraelStartingStamina=function(){c.get("/main/startStats",{params:{team:a.user,game:a.game,character:a.character,stat:"stamina"}}).then(function(b){a.syndraelstamina=b.data.stamina})},a.syndraelStartingFatigue=function(){c.get("/main/startStats",{params:{team:a.user,game:a.game,character:a.character,stat:"fatigue"}}).then(function(b){a.syndraelfatigue=b.data.fatigue})},a.staminaPlus=function(){a.syndraelstamina<a.syndraelstaminamax&&(a.syndraelstamina++,c.post("/main/staminafatigue",{params:{team:a.user,game:a.game,character:a.character,stat:a.syndraelstamina,type:"stamina"}}).then(function(){console.log("stamina post")}))},a.staminaMinus=function(){a.syndraelstamina>0&&(a.syndraelstamina--,c.post("/main/staminafatigue",{params:{team:a.user,game:a.game,character:a.character,stat:a.syndraelstamina,type:"stamina"}}).then(function(){console.log("stamina post")}))},a.fatiguePlus=function(){a.syndraelfatigue<a.syndraelfatiguemax&&(a.syndraelfatigue++,c.post("/main/staminafatigue",{params:{team:a.user,game:a.game,character:a.character,stat:a.syndraelfatigue,type:"fatigue"}}).then(function(){console.log("fatigue post")}))},a.fatigueMinus=function(){a.syndraelfatigue>0&&(a.syndraelfatigue--,c.post("/main/staminafatigue",{params:{team:a.user,game:a.game,character:a.character,stat:a.syndraelfatigue,type:"fatigue"}}).then(function(){console.log("fatigue post")}))},a.resetStats=function(){a.syndraelstamina=a.syndraelstaminamax,a.syndraelfatigue=a.syndraelfatiguemax,c.post("/main/resetStats",{params:{team:a.user,game:a.game,character:a.character,stamina:a.syndraelstaminamax,fatigue:a.syndraelfatiguemax}}).then(function(){console.log("stats reset")})},a.selectEquip=function(c){console.log("This is equipname",c.name);for(var d=0;d<a.syndraelunequip.length;d++)console.log("Scope.unequip[i]",a.syndraelunequip),console.log("This is scope.name",a.syndraelunequip[d].name),console.log(a.syndraelunequip[d].description),a.syndraelunequip[d].name==c.name&&(console.log("you are in if statement"),b.equip=a.syndraelunequip[d].name,b.description=a.syndraelunequip[d].description,1==a.syndraelunequip[d].type?b.hand="Single-Handed":2==a.syndraelunequip[d].type?b.hand="Two-Handed":b.hand=a.syndraelunequip[d].type);console.log("Selected Name",b.equip),console.log("Selected Description",b.description),console.log("Selected Type",b.hand),window.location="/assets/views/index.html#/equip"},a.syndraelStartingStamina(),a.syndraelStartingFatigue(),a.getUnequip(),a.getBankequip()}]),myApp.controller("EquipmentController",["$scope","$rootScope","$http",function(a,b,c){a.equip=b.equip,a.description=b.description,a.hand=b.hand}]),myApp.config(["$routeProvider",function(a){a.when("/acts",{templateUrl:"/assets/views/acts.html",controller:"ActsController"}).when("/main",{templateUrl:"/assets/views/main_syndrael.html",controller:"MainCharacterController"}).when("/equip",{templateUrl:"/assets/equip.html",controller:"EquipController"}).otherwise({redirectTo:"acts"})}]),myApp.directive("gameProfile",function(){return{controller:"GameController",restrict:"E",scope:{info:"="},templateUrl:"templates/gameProfile.html"}});